---

## 1. Get Leave Types

**Endpoint:** `GET /leave-types`

**Description:** Retrieve all available leave types.

**Request:**
```http
GET /api/leave-types HTTP/1.1
Authorization: Bearer {token}
Accept: application/json
```

**Response Success (200 OK):**
```json
{
  "message": "Leave types retrieved successfully",
  "data": [
    {
      "id": 1,
      "name": "Annual Leave",
      "quota_days": 12,
      "is_paid": true,
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T10:30:00.000000Z"
    },
    {
      "id": 2,
      "name": "Sick Leave",
      "quota_days": 10,
      "is_paid": true,
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T10:30:00.000000Z"
    },
    {
      "id": 3,
      "name": "Unpaid Leave",
      "quota_days": 5,
      "is_paid": false,
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T10:30:00.000000Z"
    }
  ]
}
```

**Data Model: LeaveType**
```dart
class LeaveType {
  final int id;
  final String name;
  final int quotaDays;
  final bool isPaid;
  final DateTime createdAt;
  final DateTime updatedAt;
}
```

---

## 2. Get Leave Balance

**Endpoint:** `GET /leaves/balance`

**Description:** Retrieve leave balance for the authenticated user.

**Query Parameters:**
- `year` (optional): Year to retrieve balance for. Default: current year

**Request:**
```http
GET /api/leaves/balance?year=2025 HTTP/1.1
Authorization: Bearer {token}
Accept: application/json
```

**Response Success (200 OK):**
```json
{
  "message": "Leave balance retrieved successfully",
  "data": [
    {
      "id": 1,
      "employee_id": 5,
      "leave_type_id": 1,
      "year": 2025,
      "quota_days": 12,
      "used_days": 3,
      "remaining_days": 9,
      "carry_over_days": 0,
      "last_updated": "2025-01-15T14:30:00.000000Z",
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T14:30:00.000000Z",
      "leave_type": {
        "id": 1,
        "name": "Annual Leave",
        "quota_days": 12,
        "is_paid": true,
        "created_at": "2025-01-15T10:30:00.000000Z",
        "updated_at": "2025-01-15T10:30:00.000000Z"
      }
    },
    {
      "id": 2,
      "employee_id": 5,
      "leave_type_id": 2,
      "year": 2025,
      "quota_days": 10,
      "used_days": 0,
      "remaining_days": 10,
      "carry_over_days": 0,
      "last_updated": "2025-01-15T10:30:00.000000Z",
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T10:30:00.000000Z",
      "leave_type": {
        "id": 2,
        "name": "Sick Leave",
        "quota_days": 10,
        "is_paid": true,
        "created_at": "2025-01-15T10:30:00.000000Z",
        "updated_at": "2025-01-15T10:30:00.000000Z"
      }
    }
  ]
}
```

**Data Model: LeaveBalance**
```dart
class LeaveBalance {
  final int id;
  final int employeeId;
  final int leaveTypeId;
  final int year;
  final int quotaDays;
  final int usedDays;
  final int remainingDays;
  final int carryOverDays;
  final DateTime lastUpdated;
  final DateTime createdAt;
  final DateTime updatedAt;
  final LeaveType leaveType;
}
```

---

## 3. Get All Leaves

**Endpoint:** `GET /leaves`

**Description:** Retrieve all leave requests for the authenticated user.

**Query Parameters:**
- `status` (optional): Filter by status. Values: `pending`, `approved`, `rejected`, `cancelled`

**Request:**
```http
GET /api/leaves?status=pending HTTP/1.1
Authorization: Bearer {token}
Accept: application/json
```

**Response Success (200 OK):**
```json
{
  "message": "Leaves retrieved successfully",
  "data": [
    {
      "id": 1,
      "employee_id": 5,
      "leave_type_id": 1,
      "start_date": "2025-02-10",
      "end_date": "2025-02-12",
      "total_days": 3,
      "reason": "Family vacation",
      "attachment_url": null,
      "status": "pending",
      "approved_by": null,
      "approved_at": null,
      "notes": null,
      "created_at": "2025-01-15T14:30:00.000000Z",
      "updated_at": "2025-01-15T14:30:00.000000Z",
      "leave_type": {
        "id": 1,
        "name": "Annual Leave",
        "quota_days": 12,
        "is_paid": true,
        "created_at": "2025-01-15T10:30:00.000000Z",
        "updated_at": "2025-01-15T10:30:00.000000Z"
      },
      "approver": null
    },
    {
      "id": 2,
      "employee_id": 5,
      "leave_type_id": 2,
      "start_date": "2025-01-20",
      "end_date": "2025-01-20",
      "total_days": 1,
      "reason": "Medical checkup",
      "attachment_url": "leaves/attachment_123.pdf",
      "status": "approved",
      "approved_by": 1,
      "approved_at": "2025-01-18T10:00:00.000000Z",
      "notes": null,
      "created_at": "2025-01-17T09:00:00.000000Z",
      "updated_at": "2025-01-18T10:00:00.000000Z",
      "leave_type": {
        "id": 2,
        "name": "Sick Leave",
        "quota_days": 10,
        "is_paid": true,
        "created_at": "2025-01-15T10:30:00.000000Z",
        "updated_at": "2025-01-15T10:30:00.000000Z"
      },
      "approver": {
        "id": 1,
        "name": "Admin User",
        "email": "admin@example.com"
      }
    }
  ]
}
```

**Data Model: Leave**
```dart
class Leave {
  final int id;
  final int employeeId;
  final int leaveTypeId;
  final DateTime startDate;
  final DateTime endDate;
  final int totalDays;
  final String? reason;
  final String? attachmentUrl;
  final String status; // "pending", "approved", "rejected", "cancelled"
  final int? approvedBy;
  final DateTime? approvedAt;
  final String? notes;
  final DateTime createdAt;
  final DateTime updatedAt;
  final LeaveType leaveType;
  final User? approver;
}
```

---


---

## 4. Create Leave Request

**Endpoint:** `POST /leaves`

**Description:** Create a new leave request. System will automatically:
- Calculate total workdays excluding weekends and holidays
- Validate leave balance availability
- Set status to "pending"

**Request:**
```http
POST /api/leaves HTTP/1.1
Authorization: Bearer {token}
Accept: application/json
Content-Type: application/json

{
  "leave_type_id": 1,
  "start_date": "2025-02-10",
  "end_date": "2025-02-12",
  "reason": "Family vacation",
  "attachment_url": null
}
```

**Request Body Parameters:**
- `leave_type_id` (required, integer): ID of the leave type
- `start_date` (required, date): Start date in YYYY-MM-DD format
- `end_date` (required, date): End date in YYYY-MM-DD format, must be >= start_date
- `reason` (optional, string): Reason for leave
- `attachment_url` (optional, string): URL/path to attachment file

**Response Success (201 Created):**
```json
{
  "message": "Leave request created successfully",
  "data": {
    "id": 1,
    "employee_id": 5,
    "leave_type_id": 1,
    "start_date": "2025-02-10",
    "end_date": "2025-02-12",
    "total_days": 3,
    "reason": "Family vacation",
    "attachment_url": null,
    "status": "pending",
    "approved_by": null,
    "approved_at": null,
    "notes": null,
    "created_at": "2025-01-15T14:30:00.000000Z",
    "updated_at": "2025-01-15T14:30:00.000000Z",
    "employee": {
      "id": 5,
      "name": "John Doe",
      "email": "john@example.com"
    },
    "leave_type": {
      "id": 1,
      "name": "Annual Leave",
      "quota_days": 12,
      "is_paid": true,
      "created_at": "2025-01-15T10:30:00.000000Z",
      "updated_at": "2025-01-15T10:30:00.000000Z"
    }
  }
}
```

**Response Error - Leave Balance Not Found (400 Bad Request):**
```json
{
  "message": "Leave balance not found for this leave type"
}
```

**Response Error - Insufficient Balance (400 Bad Request):**
```json
{
  "message": "Insufficient leave balance",
  "remaining_days": 2,
  "requested_days": 3
}
```

**Response Error - Validation Failed (422 Unprocessable Entity):**
```json
{
  "message": "The end date field must be a date after or equal to start date.",
  "errors": {
    "end_date": [
      "The end date field must be a date after or equal to start date."
    ]
  }
}
```

---
aku punya api dengan dokumentasi seperti diatas tolong buatkan interasi ke flutter nay denag step by setep seperti ini 
step by step
1. buat dulu masing masing model response atau pun model requets modelu request seperti nya cuku ketika creata  leave karena kalau get kita masih bisa pakai string lewat construtor
2. setelah buat model kita implementasi di layer datasource nya di datasource buat aja file leave_remote_datasource.dart kalau udah ada tambhakan implmentasi di sana dengan menggunakan package dartz, http dan untuk token bisa ambil dari final authData = await AuthLocalDatasource().getAuthData();,  'Authorization': 'Bearer ${authData?.token}',
3. setelah semua selesai di buat di datasource kita akan buat masing masing bloc nya mulai dari create leave bloc, leavet type bloc, leave balance bloc, dan get all leaves bloc, bloc nya bikin di folder leaves/bloc, kalau sudah bloc cek apakah implementasi nya benar
4. setealh bikin janagn lupa tambahkan di main.dart di MultiBlocProvider
5. setelah itu bari interasi di layer ui nya doa ada do folder leaves pages, implementasi di ui nya jangan bnayak merubah desain ataupun layout leaves cukup fokus intergasi data yang ada kalau pun belum ada tampilan pastikan tamabahn tampilan harus sesuai dengan desain yang ada